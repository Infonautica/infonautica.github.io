---
layout: post
title:  "Архитектура Angular-приложения на реальном проекте"
date:   2016-05-17 20:21:16 +0300
categories: blog
promo: "Архитектура Angular-приложения или как предсказать будущее разработки, предугадать ошибки и обходить грабли. На реальном рабочем проекте мне пришлось думать максимально объектно ориентированно, продумывая маштабируемость функционала. Это весьма интересная часть работы программистом."
---
## Введение ##
Что такое архитектура приложения и зачем она вообще нужна? Архитектура веб-приложения - это основа, это каркас, это вещь, определяющая последующую разработку. Нет ничего хуже неправильно выстроенной архитектуры, которая в процессе раширения и улучшения приложения будет ставить палки в колеса. Всего не предугадать, но можно (и даже нужно) постараться выстроить все таким образом, чтобы потом не возникло трудностей при добавлении функционала.


## Модульность ##
Хорошее приложение соблюдает модульность. Очень тяжело контролировать и редактировать код, хранящийся в одном файле: бесконечный поиск по комментариям или строчкам кода, названиям функций, большее время рендера кода редактором и т.п. Ниже приведен скриншот структуры папок в моем рабочем проекте:
   
  ![Project folders structure](/img/post/angular-arch.png)
  
В корне приложения всего четыре папки:

* __node_modules__ (зависимости node)
* __resources__ (исходные файлы стилей, нескопилированного кода и несжатых изображений)
* __public__ (скомпилированные и оптимизированные файлы)
* __app__ (весь js ангуляра)

А само оно базируется на трех основных языках (HTML, CSS, JS):

* __index.html__ (страница, отдаваемая клиенту сервером)
* __bundle.js__ (все приложение собирается и сжимается в один файл)
* __main.css__ (весь scss скомпилирован в один файл)

## Сборка ##
Сборку проекта можно разделить на 2 части: сборка ресурсов и самого приложения. Так и комманды выполняются при помощи двух разных компонентов: Gulp и Browserify. Для личного удобства я нашел плагин для Gulp, позволяющий запускать комманды из терминала и тем самым создал возможность собирать проект исключительно функциями Gulp'а.

{% highlight ruby %}
gulp # Собирает ресурсы
gulp bro # Собирает приложение через Browserify
{% endhighlight %}

Также имеются индивидуальные комманды, из названий которых, я полагаю, будет понятно, что они делают:

* gulp watch
* gulp scripts
* gulp scripts--custom
* gulp scripts--vendor
* gulp images
* gulp sass
* gulp jade
* gulp minify
* gulp prefix

## Angular-часть приложения ##
Весь Angular находится в папке `app` и содержит в себе следующие папки:

* __modules__ &mdash; angular-модули
* __services__ &mdash; сервисы, поддерживающие определенный функционал в любой точке приложения
* __templates__ &mdash; шаблоны страниц

И основные файлы:

* __app.js__ &mdash; Главный файл приложения
* __bundle.js__ &mdash; Собранный при помощи Browserify app.js
* __config.js__ &mdash; Файл-конфиг
* __root.js__ &mdash; Корневой модуль, содержащий методы и переменные, которые нужны в глобальной области видимости
* __routes.js__ &mdash; Файл роутинга, отвечающий за выбор шаблона и ссылки